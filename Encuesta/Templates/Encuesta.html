{%extends 'Main.html'%}
{%block header%}
	<h1>
		<table id="tb_header">
			<tr><td><label id="title01">SECRETARÍA DE EDUCACIÓN DE HONDURAS</label></td></tr>
			<tr><td><label id="title02">UNIDAD DE TRANSPARENCIA</label></td></tr>
			<tr><td><label id="title03">FICHA PARA VERIFICACIÓN DE MURALES DE TRANSPARENCIA</label><td></tr>
		</table>
	</h1>
{%endblock%}
{%block includes%}
	<script type="text/javascript" src="{{STATIC_URL}}static_resources/jquery/jquery-1.6.2.min.js"></script>
	<script type="text/javascript" src="{{STATIC_URL}}static_resources/jquery/jquery-ui-1.8.16.custom.min.js"></script>
	<script type="text/javascript" src="{{STATIC_URL}}static_resources/jquery/fancybox/jquery.fancybox-1.3.4.pack.js"></script>
	<!--<script type="text/javascript" src="{{STATIC_URL}}static_resources/javascript/encuesta_js.js"></script>-->
	
	<!--<script type="text/javascript" src="{{STATIC_URL}}static_resources/jquery/jquery.js"></script>-->
	<script type="text/javascript" src="{{STATIC_URL}}static_resources/jquery/jquery.validate.js"></script>

	<link rel="stylesheet" type="text/css" href="{{STATIC_URL}}resources_css/jquery-ui-1.8.16.custom.css" />
	<link rel="stylesheet" type="text/css" href="{{STATIC_URL}}resources_css/styles_encuesta.css" />
	<link rel="stylesheet" type="text/css" href="{{STATIC_URL}}resources_css/fancybox/jquery.fancybox-1.3.4.css" />
{%endblock%}
{%block contenido%}
	<script language="javascript">
		$(document).ready(function() {
			var selectedTabIndex = null;
			var validated = false;
			var valorE1 = 0 ;
			var dep=0;
			var fecha = document.getElementById('hidden_date').value;
			$( "#tabs" ).tabs({
			    select: function(event, ui) {
					selectedTabIndex = ui.index;
					var form_2_val = "null";
					if (selectedTabIndex == 0 ) form_2_val = "pg2";
					if (selectedTabIndex == 1 ) form_2_val = "pg1";
					
					switch(form_2_val){
						case "pg1" :
									validate_style(form_2_val,"temporal")
									break
						case "pg2" :
									validate_style(form_2_val,"temporal")
									break
					}
					f = "#" + form_2_val;
					validated = $(f).valid();
					if(validated == false) showMessage("Error, revise sus datos");
					return validated;
    			}
			});
			function showMessage(message){
			 
				var content = $("<div>" + message + "<br /><br /></div>");
    			var button = $("<input type='button' value='Ok' />");
    			content.append(button);

    			$.fancybox({ content: content});
    			$(button).click(function () { $.fancybox.close(); });
			
			};
			function validate_style(form,type){
				try{
					switch(form){
						case "pg1":
									if(type=="temporal"){
										$("#hidden_tiposave").val("temporal");
										$("#pg1").validate({
											rules:{
												tbxE_1 : {
															max: $("#D_2").val()
														},
												tbxE_5 : {
															max: $("#D_2").val()
														},
												tbxE_6 : {
															max: $("#D_3").val()
														},
												tbxE_7 : {
															max: Math.max($("#D_2").val(),$("#D_3").val())
														}
											},
											messages :{	
												tbxE_1 : {
															max:"Asegúrese que el valor sea igual o menor que D2._"
														 },
												tbxE_5 : {
															max:"Asegúrese que el valor sea igual o menor que D2._"
														 },	
												tbxE_6 : {
															max:"Asegúrese que el valor sea igual o menor que D3._"
														 },			
												tbxE_7 : {
															max:"Asegúrese que el valor sea igual o menor que el mayor entre D2._ y D3._"
														 }											 
											}				
										});
										$.validator.addMethod("Numeric_tbxs", $.validator.methods.number, "Ingrese elementos numéricos");
										$.validator.addClassRules("number_inputs", { Numeric_tbxs: true});										
									}
									else {
											$("#hidden_tiposave").val("final");
											$("#pg1").validate({
												onsubmit: false,
												rules: {
													tbx_fecha : "required",
													cbx_centros : "required",
													tbx_tel1 : "required",
													
												},
												messages :{	}
											});							
									}
									break
						case "pg2":
									if(type=="temporal"){
									    $("#hidden_tiposave2").val("temporal");
										$("#pg2").validate({
											onsubmit: false,
											rules: {
												tbxE_1 : {
															max: $("#D_2").val()
														},
												tbxE_5 : {
															max: $("#D_2").val()
														},
												tbxE_6 : {
															max: $("#D_3").val()
														},
												tbxE_7 : {
															max: Math.max($("#D_2").val(),$("#D_3").val())
														}
											},
											messages :{	
												tbxE_1 : {
															max:"Asegúrese que el valor sea igual o menor que D2._"
														 },
												tbxE_5 : {
															max:"Asegúrese que el valor sea igual o menor que D2._"
														 },	
												tbxE_6 : {
															max:"Asegúrese que el valor sea igual o menor que D3._"
														 },			
												tbxE_7 : {
															max:"Asegúrese que el valor sea igual o menor que el mayor entre D2._ y D3._"
														 }											 
											}				
										});
										$.validator.addMethod("Numeric_tbxs2", $.validator.methods.number, "Ingrese elementos numéricos");
										$.validator.addMethod("Required", $.validator.methods.required, "Ingrese este elemento");
										$.validator.addClassRules("inputs_parteE", { Numeric_tbxs2: true , Required : true});

									}
									else {
										$("#hidden_tiposave2").val("final");
									
									}
									break								
					}
				}
				catch(err){
					alert(err.description);
				}
			};
			$( "#datepicker" ).datepicker({ 
					dateFormat: 'yy-mm-dd'
					});
			$("#datepicker").datepicker('setDate', fecha); 
			$("#id_dep").change(function() {
				dep = $(this).val();
				$("#id_mun").empty();
				$("#id_mun").append("<option value='0' selected='selected'>Seleccione</option>");
				$("#id_centros").empty();
								
				$.ajax({
							type:"GET",
							data:
								{
									data:"muns",
									iddep:$(this).val()
								},
							url: "{% url url_bringmunicipio %}",
							success: function(msg){
										$.each(msg,function(key,val){
											$("#id_mun").append("<option value="+val.pk+">"+val.descripcion+"</option>");
						});
					}
				});
			});
			$("#id_mun").change(function() {
				$("#id_centros").empty();
				$("#id_centros").append("<option value='0' selected='selected'>Seleccione</option>");
				$.ajax({
							type:"GET",
							data:
								{
									data:"centros",
									iddep : dep,
									idmun:$(this).val()
								},
							url: "{% url url_bringcentros %}",
							success: function(msg){
										$.each(msg,function(key,val){
											$("#id_centros").append("<option value="+val.pk+">"+val.descripcion+"</option>");
						});
					}
				});
			});
			$("#id_centros").change(function(){
				$("#id_codigocentro").empty();
				$("#id_tipocentro").empty();
				$.ajax({
							type:"GET",
							data:
								{
									data : "infodecentro",
									idcentro:$(this).val()
								},
							url: "{% url url_bringcentroinfo %}",
							success: function(lista){
								
									$("#id_codigocentro").val(lista[0]);
									$("#id_tipocentro").val(lista[1]);
							}
				});
			});
			$("#btnSave").click(function(){
				try{
					var selectedTabIndex = $("#tabs").tabs("option", "selected");
					if(selectedTabIndex == 0 ){
						validate_style("pg1","temporal");
						if($("#pg1").valid()) {
							validate_style("pg2","temporal");
							if($("#pg2").valid()) {
								$("#pg1,#pg2").submit();
							}
							else showMessage("Error, revise sus datos");
						}
						else showMessage("Error, revise sus datos");
					}
					else {
						validate_style("pg2","temporal");
						if($("#pg2").valid()) {
							validate_style("pg1","temporal");
							if($("#pg1").valid()) {
								$("#pg2,#pg1").submit();
							}
							else showMessage("Error, revise sus datos");
						}
						else showMessage("Error, revise sus datos");
					}
				}
				catch(err){
					alert(err);
				}				
			});
			$("#btn_Publish").click(function(){
				if(confirm("¿Está seguro que desea publicar la encuesta y guardar los datos permanentemente?")){
				try{
					var selectedTabIndex = $("#tabs").tabs("option", "selected");
					if(selectedTabIndex == 0 ){
						validate_style("pg1","final");
						if($("#pg1").valid()) {
							validate_style("pg2","final");
							if($("#pg2").valid()) {
								$("#pg1,#pg2").submit();
							}
						}
					}
					else {
						validate_style("pg2","final");
						if($("#pg2").valid()) {
							validate_style("pg1","final");
							if($("#pg1").valid()) {
								$("#pg2,#pg1").submit();
							}
						}
					}
				}
				catch(err){
					alert(err);
				}
				}
			});
			$("#btn_Delete").click(function(){
			
			});
			$("#cbxF_3").click(function(){
				document.getElementById("cbxF_4").checked = false;
			});
			$("#cbxF_4").click(function(){
				document.getElementById("cbxF_3").checked = false;
			});
			$("#cbxF_5").click(function(){
				if(document.getElementById("cbxF_2").checked == true || document.getElementById("cbxF_4").checked == true){
					document.getElementById("cbxF_5").checked = false;
					}
			});
		});
	</script>
		<div id="tabs">
			<label>Usuario: {{usuario}}</label>
			<ul>
				<li><a href="#tabs-2">Página 1</a></li>
				<li><a href="#tabs-3">Página 2</a></li>		
			</ul>
			<fieldset id="topbar">
				<div id="topbar_btns">
					{% if show %}
						<input type="image" src="{{STATIC_URL}}resources_icons/Save.ico" id="btnSave">
						<input type="image" src="{{STATIC_URL}}resources_icons/Delete.ico" id="btn_Delete" >
						<input type="image" src="{{STATIC_URL}}resources_icons/Accept.ico" id="btn_Publish" >
					{% endif%}
				</div>
			</fieldset>
			{%if tipo == "nueva"%}
				<div id="tabs-2">
				<form id="pg1" method='post' action={%url url_save "pg1",codigo_enc%} class="val_form">{% csrf_token %}
					<input type="hidden" name="tipo_save" value="" id ="hidden_tiposave">
					<input type="hidden" name="" value={{today}} id ="hidden_date">
					<fieldset id="basico">
						<table id="tb_basico">
							<tr>
								<td><label class="lbl_basico">Código Usuario:</label></td>
								<td><input type="text" name="tbx_codigo"  value="{{id_usuario}}" disabled="disabled"></td>
							</tr>
							<tr>
								<td><label class="lbl_basico">Fecha:</label></td>
								<td><input id="datepicker" type="text" name="tbx_fecha"></td>
							</tr>
						</table>
					</fieldset>
					<br>
					<fieldset id="centro">
					<legend>Centro Educativo</legend>
						<div class="instruccion">
							<label>Seleccione el centro educativo</label>
						</div>
						<br>
						<table>
							<tr>
								<td><label class="lbl_centro">Departamento:</label></td>
								<td class="right_align"><select name="cbx_dep" id="id_dep">
										<option selected="selected">Seleccione</option>
					                	{%for d in deps%}
											<option value="{{d.pk}}"> {{d.nombre}} </option>
										{%endfor%}
									</select>
								</td>
							</tr>
							<tr>
								<td><label class="lbl_centro">Municipio:</label></td>
								<td class="right_align"><select name="cbx_mun" id="id_mun"></select></td>
							</tr>
							<tr>
								<td><label class="lbl_centro">Centro Educativo:</label></td>
								<td class="right_align"><select name="cbx_centros" id="id_centros"></select></td>
							</tr>
							<tr>
								<td><label class="lbl_centro">Código Centro:</label></td>
								<td class="right_align"><input type="text" name="tbx_idcentro" id="id_codigocentro" disabled = "disabled"></ td>
							</tr>
							<tr>
								<td><label class="lbl_centro">Tipo de Centro:</label></td>
								<td class="right_align"><input type="text" name="tbx_tipocentro" id="id_tipocentro" disabled = "disabled"></td>
							</tr>
							<tr>
								<td><label class="lbl_centro">Zona:</label></td>
								<td class="right_align"><select name="cbx_zonacentro" id="">
										<option> Rural </option>
										<option> Urbano </option>
									</select>
								</td>
							</tr>
							<tr>
								<td><label class="lbl_centro">Contacto Telefónico:</label></td>
								<td class="right_align"><input type="text" name="tbx_tel1" id="id_tel1" class ="number_inputs"></td>
							</tr>
							<!--<tr>
								<td><label class="lbl_centro">Contacto Telefónico:</label></td>
								<td class="right_align"><input type="text" name="tbx_tel2" id="id_tel2" class ="number_inputs"></td>
							</tr>-->
						</table>
					</fieldset>
					<br>
					<fieldset id="parteA">
					<legend>A. Instalación y ubicación del mural</legend>
						<div class="instruccion">
							<label>Seleccione una opción</label>
						</div>
						<br>
						<table>
							<tr>
								<td><label class="lbl_A">Instalación y Ubicación:</label></td>
								<td class="right_align"><select name="cbx_parteA" id="valueA">
										{%for a in infoA%}
											<option> {{a.descripcion}} </option>
										{%endfor%}
									</select>
								</td>
							</tr>
						</table>
					</fieldset>
					<br>			
					<fieldset id="parteB">
					<legend>B. Información obligatoria publicada en el mural</legend>
						<div class="instruccion">
							<label>Puede elegir varias opciones y escribir hasta 4 tipos de información extra</label>
						</div>
						<br>
						<table id="tb_parteB01">
							{%for b in infoB%}
								<tr><td>B{{b.codigo}}._<input type="checkbox" name="cbxB" value= {{b.codigo}} />{{b.descripcion}}</td></tr>
							{%endfor%}
						</table>
						<br>			
						<div class="instruccion2">
							<label>Resuma lo mejor posible y revise su ortografía</label>
							<label>Ejemplos de otra información: Merienda escolar, ingreso por cafeterias, ingreso por parqueo y otra información financiera.</label>
						</div>
						<br>
						<table id="tb_parteB02">
							{%for r in range1%}
								<tr>
									<td><label>Otra Información:</label>
									<input type="text" name="tbx_oi" maxlength="150"></td>
								</tr>
							{%endfor%}
						</table>
					</fieldset>
					<br>
					<fieldset id="parteC">
					<legend>C. Orden de la información</legend>
						<div class="instruccion">
							<label>Para cada casilla, seleccione SI o NO</label>
						</div>
						<br>
						<table>
							{%for c in infoC%}
								<tr>
									<td><label>C{{c.codigo}}._{{c.descripcion}}</label></td>
									<td class="right_align"><select name="selC_{{c.codigo}}">
											<option>SI</option>
											<option>NO</option>
										</select>
									</td>
								</tr>
							{%endfor%}
						</table>
					</fieldset>
					<br>
					<fieldset id="parteD">
					<legend>D. Cantidades totales de docentes</legend>
						<div class="instruccion">
							<label>Solo colocar números en cada casilla</label>
						</div>
						<br>
						<table>
							{%for d in infoD%}
								<tr>
									<td><label>D{{d.codigo}}._{{d.descripcion}}</label></td>
									<td class="right_align"><input type="number" name="tbxD_{{d.codigo}}" id = "D_{{d.codigo}}" class="number_inputs" value=0></td>
									<td class="status"></td>
								</tr>
							{%endfor%}
						</table>
					</fieldset>			
				</form>
				</div>
				<div id="tabs-3">
				<form id="pg2" method='post' action={%url url_save "pg2",codigo_enc%} class="val_form">{% csrf_token %}
					<input type="hidden" name="tipo_save" value="" id ="hidden_tiposave2">
					<fieldset id="parteE">
					<legend>E. Hallazgos e Irregularidades en LISTAS</legend>
						<div class="instruccion">
							<label>Solo colocar números en cada casilla</label>
						</div>
						<br>
						<table>
							{%for e in infoE%}
								<tr>
									<td><label>E{{e.codigo}}._{{e.descripcion}}</label></td>
									<td class="right_align"><input type="number"  name="tbxE_{{e.codigo}}" id = "tbxE_{{e.codigo}}"  class="inputs_parteE" value=0></td>
								</tr>
							{%endfor%}
						</table>
					</fieldset>
					<br>
					<fieldset id="parteF">
					<legend>F. Hallazgos e irregularidades en MATRICULA GRATIS</legend>
						<div class="instruccion">
							<label>Seleccione la opción y si es necesario, digitar hasta otras tres irregularidades más</label>
						</div>
						<br>
						<table id="tb_parteF01">
							{%for f in infoF%}
								<tr><td>F{{f.codigo}}._<input type="checkbox" id="cbxF_{{f.codigo}}" name="cbxF" value= {{f.codigo}} />{{f.descripcion}}</td></tr>
							{%endfor%}
						</table>
						<br>
						<div class="instruccion2">
							<label>Resumir la irregularidad lo mejor posible</label>
						</div>
						<br>
						<table id="tb_parteF02">
							{%for r in range2%}
								<tr>
									<td><label>Otra irregularidad de Matrícula Gratis:</label>
									<input type="text" name="tbx_oi2" maxlength="100"></td>
								</tr>
							{%endfor%}
						</table>
					</fieldset>
					<br>
					<fieldset id="parteG">
					<legend>G. Creatividad (colores, materiales autóctonos, decorado)</legend>
						<div class="instruccion">
							<label>Seleccione una opción</label>
						</div>
						<br>
						<table>
							{%for g in infoG%}
								<tr>
								<td><label>G{{g.codigo}}._{{g.descripcion}}</label></td>
								<td class="right_align"><select name="selG_{{g.codigo}}">
										<option> Excelente</option>
										<option> Muy Bueno</option>
										<option> Bueno</option>
										<option> Regular</option>
										<option> Malo </option>
									</select></br>
								</td>
							{%endfor%}
						</table>
					</fieldset>
				</form>
				
				</div>
				<fieldset id="footbar">
					<div id="footbar_btns">
						<input type="image" src="{{STATIC_URL}}resources_icons/back.ico" id="btnBack">
						<input type="image" src="{{STATIC_URL}}resources_icons/forward.ico" id="btnFwd">
					</div>
				</fieldset>
			{%else%}
			{%load customfilters%}
				<div id="tabs-2">
				<form id="pg1" method='post' action={%url url_save "pg1",codigo_enc%} class="val_form">{% csrf_token %}
					<input type="hidden" name="tipo_save" value="" id ="hidden_tiposave">
					<input type="hidden" name="" value={{encuesta.fecha|setval:"fecha"}} id ="hidden_date">
					<fieldset id="basico">
						<table id="tb_basico">
							<tr>
								<td><label class="lbl_basico">Código Usuario:</label></td>
								<td><input type="text" name="tbx_codigo"  value="{{id_usuario}}" disabled="disabled"></td>
							</tr>
							<tr>
								<td><label class="lbl_basico">Fecha:</label></td>
								<td><input id="datepicker" type="text" name="tbx_fecha" value=""></td>
							</tr>
						</table>
					</fieldset>
					<br>
					<fieldset id="centro">
					<legend>Centro Educativo</legend>
						<div class="instruccion">
							<label>Seleccione el centro educativo</label>
						</div>
						<br>
						<table>
							<tr>
								<td><label class="lbl_centro">Departamento:</label></td>
								<td class="right_align"><select name="cbx_dep" id="id_dep">
										<option selected="selected">Seleccione</option>
					                	{%for d in deps%}
											<option value="{{d.pk}}"> {{d.nombre}} </option>
										{%endfor%}
									</select>
								</td>
							</tr>
							<tr>
								<td><label class="lbl_centro">Municipio:</label></td>
								<td class="right_align"><select name="cbx_mun" id="id_mun"></select></td>
							</tr>
							<tr>
								<td><label class="lbl_centro">Centro Educativo:</label></td>
								<td class="right_align"><select name="cbx_centros" id="id_centros">
									{%for item in encuesta.codigo_centro|getallcentros%}
										{%if item.nombre == encuesta.codigo_centro|getinfocentro:"nombre"%}
											<option value={{item.pk}} selected="selected"> {{item}} </option>
										{%else%}
											<option value={{item.pk}}> {{item}} </option>
										{%endif%}
									{%endfor%}
								</select></td>								
							</tr>
							<tr>
								<td><label class="lbl_centro">Código Centro:</label></td>
								<td class="right_align"><input type="text" name="tbx_idcentro" id="id_codigocentro" disabled = "disabled" value={{encuesta.codigo_centro|getinfocentro:"codigo"}}></ td>
							</tr>
							<tr>
								<td><label class="lbl_centro">Tipo de Centro:</label></td>
								<td class="right_align"><input type="text" name="tbx_tipocentro" id="id_tipocentro" disabled = "disabled" value={{encuesta.codigo_centro|getinfocentro:"tipo"}}></td>
							</tr>
							<tr>
								<td><label class="lbl_centro">Zona:</label></td>
								<td class="right_align"><select name="cbx_zonacentro" id="" value="{{encuesta.zona}}">
										<option> Rural </option>
										<option> Urbano </option>
									</select>
								</td>
							</tr>
							<tr>
								<td><label class="lbl_centro">Contacto Telefónico:</label></td>
								<td class="right_align"><input type="text" name="tbx_tel1" id="id_tel1" class ="number_inputs" value={{encuesta.tel|setval:"tel"}}></td>
							</tr>
						</table>
					</fieldset>
					<br>
					<fieldset id="parteA">
					<legend>A. Instalación y ubicación del mural</legend>
						<div class="instruccion">
							<label>Seleccione una opción</label>
						</div>
						<br>
						<table>
							<tr>
								<td><label class="lbl_A">Instalación y Ubicación:</label></td>
								<td class="right_align"><select name="cbx_parteA" id="valueA">
										{%for a in infoA%}
											{%if a.codigo == da.0%}
												<option selected="selected"> {{a.descripcion}} </option>
											{%else%}
												<option> {{a.descripcion}} </option>
											{%endif%}
										{%endfor%}
									</select>
								</td>
							</tr>
						</table>
					</fieldset>
					<br>			
					<fieldset id="parteB">
					<legend>B. Información obligatoria publicada en el mural</legend>
						<div class="instruccion">
							<label>Puede elegir varias opciones y escribir hasta 4 tipos de información extra</label>
						</div>
						<br>
						<table id="tb_parteB01">
							{%for b in infoB%}
								{%if b.codigo in db%}
									<tr><td>B{{b.codigo}}._<input type="checkbox" name="cbxB" value= {{b.codigo}} checked="checked"/>{{b.descripcion}}</td></tr>
								{%else%}
									<tr><td>B{{b.codigo}}._<input type="checkbox" name="cbxB" value= {{b.codigo}} />{{b.descripcion}}</td></tr>
								{%endif%}
							{%endfor%}
						</table>
						<br>			
						<div class="instruccion2">
							<label>Resuma lo mejor posible y revise su ortografía</label>
							<label>Ejemplos de otra información: Merienda escolar, ingreso por cafeterias, ingreso por parqueo y otra información financiera.</label>
						</div>
						<br>
						<table id="tb_parteB02">
							{%for item in db2%}
								<tr>
									<td><label>Otra Información:</label>
									<input type="text" name="tbx_oi" maxlength="150" value = {{item}}></td>
								</tr>
							{%endfor%}
						</table>
					</fieldset>
					<br>
					<fieldset id="parteC">
					<legend>C. Orden de la información</legend>
						<div class="instruccion">
							<label>Para cada casilla, seleccione SI o NO</label>
						</div>
						<br>
						<table>
							{%for c in infoC%}
								<tr>
									<td><label>C{{c.codigo}}._{{c.descripcion}}</label></td>
									<td class="right_align"><select name="selC_{{c.codigo}}">
										{%if dc|iteminlist:forloop.counter0 == "SI"%}
											<option selected="selected">SI</option>
											<option>NO</option>
										{%else%}
											<option>SI</option>
											<option selected="selected">NO</option>
										{%endif%}	
										</select>
									</td>
								</tr>
							{%endfor%}
						</table>
					</fieldset>
					<br>
					<fieldset id="parteD">
					<legend>D. Cantidades totales de docentes</legend>
						<div class="instruccion">
							<label>Solo colocar números en cada casilla</label>
						</div>
						<br>
						<table>
							{%for d in infoD%}
								<tr>
									<td><label>D{{d.codigo}}._{{d.descripcion}}</label></td>
									<td class="right_align"><input type="number" name="tbxD_{{d.codigo}}" id = "D_{{d.codigo}}" class="number_inputs" value= {{dd|iteminlist:forloop.counter0}}></td>
									<td class="status"></td>
								</tr>
							{%endfor%}
						</table>
					</fieldset>			
				</form>
				</div>
				<div id="tabs-3">
				<form id="pg2" method='post' action={%url url_save "pg2",codigo_enc%} class="val_form">{% csrf_token %}
					<input type="hidden" name="tipo_save" value="" id ="hidden_tiposave2">
					<fieldset id="parteE">
					<legend>E. Hallazgos e Irregularidades en LISTAS</legend>
						<div class="instruccion">
							<label>Solo colocar números en cada casilla</label>
						</div>
						<br>
						<table>
							{%for e in infoE%}
								<tr>
									<td><label>E{{e.codigo}}._{{e.descripcion}}</label></td>
									<td class="right_align"><input type="number"  name="tbxE_{{e.codigo}}" class="inputs_parteE" value= {{de|iteminlist:forloop.counter0}}></td>
								</tr>
							{%endfor%}
						</table>
					</fieldset>
					<br>
					<fieldset id="parteF">
					<legend>F. Hallazgos e irregularidades en MATRICULA GRATIS</legend>
						<div class="instruccion">
							<label>Seleccione la opción y si es necesario, digitar hasta otras tres irregularidades más</label>
						</div>
						<br>
						<table id="tb_parteF01">
							{%for f in infoF%}
								{%if f.codigo in df%}
									<tr><td>F{{f.codigo}}._<input type="checkbox" id="cbxF_{{f.codigo}}" name="cbxF" value= {{f.codigo}} checked="checked"/>{{f.descripcion}}</td></tr>
								{%else%}
									<tr><td>F{{f.codigo}}._<input type="checkbox" id="cbxF_{{f.codigo}}" name="cbxF" value= {{f.codigo}} />{{f.descripcion}}</td></tr>
								{%endif%}	
							{%endfor%}
						</table>
						<br>
						<div class="instruccion2">
							<label>Resumir la irregularidad lo mejor posible</label>
						</div>
						<br>
						<table id="tb_parteF02">
							{%for item in df2%}
								<tr>
									<td><label>Otra irregularidad de Matrícula Gratis:</label>
									<input type="text" name="tbx_oi2" maxlength="100" value = {{item}}></td>
								</tr>
							{%endfor%}
						</table>
					</fieldset>
					<br>
					<fieldset id="parteG">
					<legend>G. Creatividad (colores, materiales autóctonos, decorado)</legend>
						<div class="instruccion">
							<label>Seleccione una opción</label>
						</div>
						<br>
						<table>
							{%for g in infoG%}
								<tr>
								<td><label>G{{g.codigo}}._{{g.descripcion}}</label></td>
								<td class="right_align"><select name="selG_{{g.codigo}}">
									{%if dg|iteminlist:forloop.counter0 == "Excelente"%}
										<option selected = "selected"> Excelente</option>
										<option> Muy Bueno</option>
										<option> Bueno</option>
										<option> Regular</option>
										<option> Malo</option>
									{%endif%}
									{%if dg|iteminlist:forloop.counter0 == "Muy Bueno"%}
										<option> Excelente</option>
										<option selected = "selected"> Muy Bueno</option>
										<option> Bueno</option>
										<option> Regular</option>
										<option> Malo</option>
									{%endif%}
									{%if dg|iteminlist:forloop.counter0 == "Bueno"%}
										<option> Excelente</option>
										<option selected = "selected"> Muy Bueno</option>
										<option> Bueno</option>
										<option> Regular</option>
										<option> Malo</option>
									{%endif%}
									{%if dg|iteminlist:forloop.counter0 == "Regular"%}
										<option> Excelente</option>
										<option selected = "selected"> Muy Bueno</option>
										<option> Bueno</option>
										<option selected = "selected"> Regular</option>
										<option> Malo</option>
									{%endif%}
									{%if dg|iteminlist:forloop.counter0 == "Malo"%}
										<option> Excelente</option>
										<option selected = "selected"> Muy Bueno</option>
										<option> Bueno</option>
										<option> Regular</option>
										<option selected = "selected"> Malo</option>
									{%else%}
										<option> Excelente</option>
										<option> Muy Bueno</option>
										<option> Bueno</option>
										<option> Regular</option>
										<option> Malo</option>
									{%endif%}
									</select></br>
								</td>
							{%endfor%}
						</table>
					</fieldset>
				</form>
				</div>
			{%endif%}			
		</div>
{%endblock%}